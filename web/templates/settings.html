{{define "content"}}
<h2>Settings</h2>

<div class="card">
    <h3>Institute Location</h3>
    <p class="text-muted">Set the starting point for all routes (where participants are picked up).</p>

    <form hx-put="/api/v1/settings"
          hx-target="#settings-result"
          hx-indicator="#settings-loading">
        <div class="form-group">
            <label class="form-label">Institute Address</label>
            <input type="text"
                   name="institute_address"
                   class="form-input"
                   value="{{.Settings.InstituteAddress}}"
                   placeholder="Enter full address"
                   required>
            <div class="form-help">Full address including street, city, state/province, and country</div>
        </div>

        {{if .Settings.InstituteCoords}}
        {{if ne .Settings.InstituteCoords.Lat 0.0}}
        <div class="form-group">
            <label class="form-label">Current Coordinates</label>
            <p class="text-muted">
                Latitude: {{printf "%.6f" .Settings.InstituteCoords.Lat}},
                Longitude: {{printf "%.6f" .Settings.InstituteCoords.Lng}}
            </p>
        </div>
        {{end}}
        {{end}}

        <div class="d-flex align-center gap-2">
            <button type="submit" class="btn btn-primary">
                Save Settings
            </button>
            <span class="loading htmx-indicator" id="settings-loading"></span>
        </div>
    </form>

    <!-- Result Container -->
    <div id="settings-result" class="mt-3"></div>
</div>
{{end}}
